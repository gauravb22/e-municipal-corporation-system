<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Your Ward Works | E-Municipal Corporation</title>

<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

/* BODY */

body{
    margin:0;
    font-family:"Segoe UI", Arial;
    background:linear-gradient(135deg,#1e3c72,#2a5298);
    min-height:100vh;
}

/* TOPBAR */

.topbar{
    background:#16325c;
    color:white;
    display:flex;
    align-items:center;
    padding:12px 16px;
    gap:12px;
}

.topbar strong{
    font-size:16px;
}

/* CONTAINER */

.container{
    max-width:900px;
    margin:25px auto;
    padding:12px;
}

/* TITLE */

.section-title{
    color:white;
    font-size:22px;
    margin-bottom:18px;
}

/* GRID */

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:16px;
}

/* CARD */

.card{
    background:white;
    border-radius:18px;
    padding:18px;
    box-shadow:0 12px 28px rgba(0,0,0,.18);
    transition:.3s;
}

.card:hover{
    transform:translateY(-6px);
}

.card h3{
    margin:0 0 8px;
}

.info{
    font-size:13px;
    color:#555;
    margin-top:5px;
}

.info i{
    margin-right:6px;
}

/* RATING */

.star{
    color:gold;
    margin-top:10px;
    font-size:18px;
}

</style>

</head>

<body>

<!-- TOPBAR -->

<div class="topbar">
    <i class="fa-solid fa-city"></i>
    <strong>E-Municipal Corporation</strong>
</div>

<div class="container">

<div class="section-title">
    Your Ward Member Completed Works
</div>

<div class="grid" id="workList">

    <!-- DATA WILL LOAD HERE -->

</div>

</div>

<script>

/*
AUTO LOAD USER WARD WORKS

Backend should detect user from session
and return only their ward data
*/

fetch("/api/ward-works")
.then(res => res.json())
.then(data => {

    let html = "";

    data.forEach(work => {

        html += `
            <div class="card">

                <h3>${work.title}</h3>

                <p>${work.description}</p>

                <div class="info">
                    <i class="fa-solid fa-user"></i>
                    Done by: ${work.doneBy}
                </div>

                <div class="info">
                    <i class="fa-solid fa-location-dot"></i>
                    Ward ${work.wardNo}
                </div>

                <div class="star">
                    ⭐⭐⭐⭐⭐
                </div>

            </div>
        `;
    });

    document.getElementById("workList").innerHTML = html;

});

</script>

</body>
</html>
