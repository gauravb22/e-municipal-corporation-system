<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Ward Member Profile</title>

    <link rel="stylesheet" href="/css/ward-profile.css">
</head>
<body>
<div class="topbar">
    <div>Ward Member Profile</div>
    <a href="/ward-dashboard" style="color:white;text-decoration:none;">Back</a>
</div>

<div class="container">
    <form class="card" method="post" action="/ward-profile">
        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

        <div class="profile">
            <img class="photo" id="photoPreview" th:src="${staffUser.photoBase64 != null ? staffUser.photoBase64 : '/images/ward-member.png'}" alt="Profile">
            <div>
                <div class="name" th:text="${staffUser.fullName != null && !#strings.isEmpty(staffUser.fullName) ? staffUser.fullName : 'Ward Member'}">Ward Member</div>
                <div class="meta">Ward No: <span th:text="${staffUser.wardNo}">10</span> | Zone: <span th:text="${staffUser.wardZone}">A</span></div>
                <div class="note">Tap below to change photo.</div>
            </div>
        </div>

        <div class="form-group">
            <label>Full Name</label>
            <input type="text" name="fullName" placeholder="Enter full name" th:value="${staffUser.fullName}">
        </div>

        <div class="form-group">
            <label>Profile Photo</label>
            <input type="file" id="photoInput" accept=".jpg,.jpeg,image/jpeg" onchange="handlePhoto(event)">
            <input type="hidden" id="photoBase64" name="photoBase64">
            <div class="note">Only JPG format is allowed.</div>
        </div>

        <div class="form-group">
            <label>Mobile Number</label>
            <div class="phone-wrap">
                <span class="country-code">+91</span>
                <input type="text" name="phone" maxlength="10" inputmode="numeric" pattern="[0-9]{10}" placeholder="Enter 10-digit mobile number" th:value="${staffUser.phone}">
            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <label>New Password</label>
                <input type="password" name="newPassword" placeholder="New password">
            </div>
            <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" name="confirmPassword" placeholder="Confirm password">
            </div>
        </div>
        <div class="form-group">
            <label>OTP</label>
            <input type="text" name="passwordOtp" maxlength="6" inputmode="numeric" pattern="[0-9]{6}" placeholder="Enter 6-digit OTP">
        </div>
        <div class="form-group">
            <button class="btn" type="button" onclick="sendWardPasswordOtp()">Send OTP</button>
            <div class="note" id="passwordOtpStatus"></div>
        </div>

        <button class="btn" type="submit">Save Changes</button>
    </form>
</div>


    <script src="/js/ward-profile.js"></script>
</body>
</html>

