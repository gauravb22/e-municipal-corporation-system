<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Ward Member Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <link rel="stylesheet" href="/css/ward-dashboard.css">
</head>
<body>
<div class="topbar">
    <div class="brand">
        <img src="/images/municipalLogo.png" alt="Logo">
        <div>
            <div class="brand-title">Akola Mahanagarpalika</div>
            <div class="brand-sub">Ward Member Dashboard</div>
        </div>
    </div>
    <a class="logout-link" href="/logout">Logout</a>
</div>

<div class="alert-strip">
    <div class="alert-track" th:if="${wardNotices != null && !wardNotices.isEmpty()}">
        <span th:each="n : ${wardNotices}" th:text="${n.message}"></span>
    </div>
    <div class="alert-track" th:if="${wardNotices == null || wardNotices.isEmpty()}">
        <span>No new ward member notices from administration.</span>
    </div>
</div>

<div class="container">
    <div class="card member-card">
        <img class="member-photo" th:src="${staffUser.photoBase64 != null ? staffUser.photoBase64 : '/images/ward-member.png'}" alt="Ward Member">
        <div>
            <div class="member-name" th:text="${staffUser.fullName != null && !#strings.isEmpty(staffUser.fullName) ? staffUser.fullName : 'Ward Member'}">Ward Member</div>
            <div class="member-meta">
                Ward No: <span th:text="${staffUser.wardNo != null ? staffUser.wardNo : 'N/A'}">10</span> |
                Zone: <span th:text="${staffUser.wardZone != null ? staffUser.wardZone : 'N/A'}">A</span>
            </div>
        </div>
    </div>
    <div class="title">Ward Performance Overview</div>
    <div class="stats">
        <div class="stat-card">
            <div class="stat-label">Total Work Done (This Year)</div>
            <div class="stat-value" th:text="${worksCompletedThisYear != null ? worksCompletedThisYear : 0}">0</div>
            <div class="note">Includes completed ward works</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Pending Works</div>
            <div class="stat-value" th:text="${pendingWorksCount != null ? pendingWorksCount : 0}">0</div>
            <div class="note">Awaiting completion</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">People Rating (Average)</div>
            <div class="stat-value" th:text="${avgRating != null ? avgRating : 0.0}">0.0</div>
            <div class="rating">
                <div class="rating-stars">
                    <i class="fa-solid fa-star" aria-hidden="true"></i>
                    <i class="fa-solid fa-star" aria-hidden="true"></i>
                    <i class="fa-solid fa-star" aria-hidden="true"></i>
                    <i class="fa-solid fa-star" aria-hidden="true"></i>
                    <i class="fa-solid fa-star" aria-hidden="true"></i>
                </div>
                <div class="note">Score from 1.0 to 5.0</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-label">My Work Summary</div>
            <div class="summary-list">
                <div class="summary-item">
                    <span>Assigned Today</span>
                    <strong th:text="${assignedToday != null ? assignedToday : 8}">8</strong>
                </div>
                <div class="summary-item">
                    <span>In Progress</span>
                    <strong th:text="${inProgressCount != null ? inProgressCount : 3}">3</strong>
                </div>
                <div class="summary-item">
                    <span>Completed Today</span>
                    <strong th:text="${completedToday != null ? completedToday : 5}">5</strong>
                </div>
                <div class="summary-item">
                    <span>Pending</span>
                    <strong th:text="${pendingSummaryCount != null ? pendingSummaryCount : 2}">2</strong>
                </div>
                <div class="summary-item overdue">
                    <span>Overdue</span>
                    <strong th:text="${overdueWorksCount != null ? overdueWorksCount : 0}">0</strong>
                </div>
            </div>
            <div class="note">Ward workload snapshot</div>
        </div>
    </div>

    <div class="title">Ward Member Services</div>
    <div class="grid">
        <div class="card">
            <h3>Ward Complaints</h3>
            <p>Review and manage complaints related to your ward.</p>
            <a href="/ward-complaints">Open Complaints</a>
        </div>
        <div class="card">
            <h3>Edit Profile</h3>
            <p>Update your profile details.</p>
            <a href="/ward-profile">Open Profile</a>
        </div>
        <div class="card">
            <h3>Post on Ward Works</h3>
            <p>Publish new work updates for your ward.</p>
            <a href="/ward-works">Post Ward Works</a>
        </div>
    </div>
</div>

<footer class="footer">
    <strong>Akola Municipal Corporation</strong> | Ward Member Portal
</footer>
</body>
</html>

